# KNXSim Default Configuration
# =============================
# Realistic sample home demonstrating KNX installation patterns.
# Each room has: light, wall switch, room thermostat, presence detector.
# Actuators are centralized in Distribution Board (as in real installations).
#
# KEY CONCEPT: Devices vs Loads
# - DEVICES are KNX bus participants (actuators, sensors, buttons) with individual addresses
# - LOADS are dumb equipment (lights, motors, valves) controlled BY actuator channels
# Loads have NO individual address - they're just 230V equipment wired to relay outputs.
#
# GA Structure: Standard 3-level (Main=Function, Middle=Floor, Sub=Object)
#   1/x/x = Lighting
#   3/x/x = HVAC / Heating
#   4/x/x = Sensors (presence, brightness)
#
# Topology: Area 1
#   1.1.x = Actuators (switch, heating) - Distribution Board
#   1.2.x = Wall controls (push buttons)
#   1.3.x = Room controllers (thermostats, presence)
#
# ROOM THERMOSTAT PATTERN:
# Each room thermostat has a built-in temp sensor, setpoint, and heating output.
# The heating_output GA matches the heating actuator valve channel GA.
# When thermostat calculates demand (0-100%), it sends to that GA,
# and the heating actuator opens the valve proportionally.

gateway:
  individual_address: "1.0.0"
  client_address: "1.0.255"

devices:
  # ============================================
  # DISTRIBUTION BOARD - ACTUATORS
  # ============================================
  
  # 6-fold Switch Actuator for Lighting
  # Controls all room lights from the distribution board
  # Real device: MDT AKS-0616.03 / ABB SA/S 6.16.1
  - id: "light-actuator-6ch"
    type: "switch_actuator_6fold"
    individual_address: "1.1.1"
    room_id: "distribution-board"
    group_addresses:
      # Channel A - Living Room Light
      channel_a_switch: "1/0/1"
      channel_a_switch_status: "1/0/2"
      # Channel B - Kitchen Light
      channel_b_switch: "1/0/10"
      channel_b_switch_status: "1/0/11"
      # Channel C - Hallway Light
      channel_c_switch: "1/0/20"
      channel_c_switch_status: "1/0/21"
      # Channel D - Bedroom Light
      channel_d_switch: "1/0/30"
      channel_d_switch_status: "1/0/31"
      # Channel E - Bathroom Light
      channel_e_switch: "1/0/40"
      channel_e_switch_status: "1/0/41"
      # Channel F - Spare
      channel_f_switch: "1/0/50"
      channel_f_switch_status: "1/0/51"

  # 6-fold Heating Actuator for Underfloor Heating Manifold
  # Controls zone valves for each room - PROPORTIONAL (0-100%)
  # Real device: MDT AKH-0600.02 / ABB VAA/S 6.230.2.1
  # DPT 5.001 = percentage for proportional valve control
  - id: "heating-actuator-6ch"
    type: "heating_actuator_6fold"
    individual_address: "1.1.2"
    room_id: "distribution-board"
    group_addresses:
      # Channel A - Living Room UFH Valve (receives from thermostat)
      channel_a_valve:
        ga: "3/0/1"
        dpt: "5.001"
      channel_a_valve_status:
        ga: "3/0/2"
        dpt: "5.001"
      # Channel B - Kitchen UFH Valve
      channel_b_valve:
        ga: "3/0/10"
        dpt: "5.001"
      channel_b_valve_status:
        ga: "3/0/11"
        dpt: "5.001"
      # Channel C - Hallway UFH Valve
      channel_c_valve:
        ga: "3/0/20"
        dpt: "5.001"
      channel_c_valve_status:
        ga: "3/0/21"
        dpt: "5.001"
      # Channel D - Bedroom UFH Valve
      channel_d_valve:
        ga: "3/0/30"
        dpt: "5.001"
      channel_d_valve_status:
        ga: "3/0/31"
        dpt: "5.001"
      # Channel E - Bathroom UFH Valve
      channel_e_valve:
        ga: "3/0/40"
        dpt: "5.001"
      channel_e_valve_status:
        ga: "3/0/41"
        dpt: "5.001"
      # Channel F - Spare
      channel_f_valve:
        ga: "3/0/50"
        dpt: "5.001"
      channel_f_valve_status:
        ga: "3/0/51"
        dpt: "5.001"

  # ============================================
  # LIVING ROOM DEVICES
  # ============================================

  # Wall Switch - Living Room
  - id: "switch-living"
    type: "push_button_2fold"
    individual_address: "1.2.1"
    room_id: "living-room"
    group_addresses:
      button_1: "1/0/1"        # ‚Üí Light actuator Ch A
      button_1_led: "1/0/2"    # ‚Üê Status feedback

  # Room Thermostat - Living Room
  # Built-in temp sensor + PI controller + heating output
  # heating_output sends demand (0-100%) to heating actuator channel A
  - id: "thermostat-living"
    type: "thermostat"
    individual_address: "1.3.1"
    room_id: "living-room"
    group_addresses:
      actual_temperature:
        ga: "3/0/3"
        dpt: "9.001"
      setpoint:
        ga: "3/0/4"
        dpt: "9.001"
      heating_output:
        ga: "3/0/1"            # ‚Üí Heating actuator Ch A valve
        dpt: "5.001"
    initial:
      current_temperature: 21.5
      setpoint: 21.0

  # Presence Detector - Living Room
  - id: "presence-living"
    type: "presence"
    individual_address: "1.3.2"
    room_id: "living-room"
    group_addresses:
      presence: "4/0/1"
      lux: "4/0/2"
    initial:
      presence: false
      lux: 300

  # ============================================
  # KITCHEN DEVICES
  # ============================================

  - id: "switch-kitchen"
    type: "push_button_2fold"
    individual_address: "1.2.2"
    room_id: "kitchen"
    group_addresses:
      button_1: "1/0/10"
      button_1_led: "1/0/11"

  - id: "thermostat-kitchen"
    type: "thermostat"
    individual_address: "1.3.3"
    room_id: "kitchen"
    group_addresses:
      actual_temperature:
        ga: "3/0/13"
        dpt: "9.001"
      setpoint:
        ga: "3/0/14"
        dpt: "9.001"
      heating_output:
        ga: "3/0/10"           # ‚Üí Heating actuator Ch B valve
        dpt: "5.001"
    initial:
      current_temperature: 22.0
      setpoint: 20.0

  - id: "presence-kitchen"
    type: "presence"
    individual_address: "1.3.4"
    room_id: "kitchen"
    group_addresses:
      presence: "4/0/10"
      lux: "4/0/11"
    initial:
      presence: false
      lux: 400

  # ============================================
  # HALLWAY DEVICES
  # ============================================

  - id: "switch-hallway"
    type: "push_button_2fold"
    individual_address: "1.2.3"
    room_id: "hallway"
    group_addresses:
      button_1: "1/0/20"
      button_1_led: "1/0/21"

  - id: "thermostat-hallway"
    type: "thermostat"
    individual_address: "1.3.5"
    room_id: "hallway"
    group_addresses:
      actual_temperature:
        ga: "3/0/23"
        dpt: "9.001"
      setpoint:
        ga: "3/0/24"
        dpt: "9.001"
      heating_output:
        ga: "3/0/20"           # ‚Üí Heating actuator Ch C valve
        dpt: "5.001"
    initial:
      current_temperature: 19.5
      setpoint: 18.0

  - id: "presence-hallway"
    type: "presence"
    individual_address: "1.3.6"
    room_id: "hallway"
    group_addresses:
      presence: "4/0/20"
      lux: "4/0/21"
    initial:
      presence: false
      lux: 100

  # ============================================
  # BEDROOM DEVICES
  # ============================================

  - id: "switch-bedroom"
    type: "push_button_2fold"
    individual_address: "1.2.4"
    room_id: "bedroom"
    group_addresses:
      button_1: "1/0/30"
      button_1_led: "1/0/31"

  - id: "thermostat-bedroom"
    type: "thermostat"
    individual_address: "1.3.7"
    room_id: "bedroom"
    group_addresses:
      actual_temperature:
        ga: "3/0/33"
        dpt: "9.001"
      setpoint:
        ga: "3/0/34"
        dpt: "9.001"
      heating_output:
        ga: "3/0/30"           # ‚Üí Heating actuator Ch D valve
        dpt: "5.001"
    initial:
      current_temperature: 20.0
      setpoint: 19.0

  - id: "presence-bedroom"
    type: "presence"
    individual_address: "1.3.8"
    room_id: "bedroom"
    group_addresses:
      presence: "4/0/30"
      lux: "4/0/31"
    initial:
      presence: false
      lux: 50

  # ============================================
  # BATHROOM DEVICES
  # ============================================

  - id: "switch-bathroom"
    type: "push_button_2fold"
    individual_address: "1.2.5"
    room_id: "bathroom"
    group_addresses:
      button_1: "1/0/40"
      button_1_led: "1/0/41"

  - id: "thermostat-bathroom"
    type: "thermostat"
    individual_address: "1.3.9"
    room_id: "bathroom"
    group_addresses:
      actual_temperature:
        ga: "3/0/43"
        dpt: "9.001"
      setpoint:
        ga: "3/0/44"
        dpt: "9.001"
      heating_output:
        ga: "3/0/40"           # ‚Üí Heating actuator Ch E valve
        dpt: "5.001"
    initial:
      current_temperature: 23.0
      setpoint: 22.0

  - id: "presence-bathroom"
    type: "presence"
    individual_address: "1.3.10"
    room_id: "bathroom"
    group_addresses:
      presence: "4/0/40"
      lux: "4/0/41"
    initial:
      presence: false
      lux: 200

# ============================================
# SCENARIOS (Simulated sensor behavior)
# ============================================
scenarios:
  # Temperature variations - thermostats now have built-in sensors
  - device_id: "thermostat-living"
    field: "current_temperature"
    type: "sine_wave"
    params:
      center: 21.5
      amplitude: 1.0
      period_minutes: 60
      interval_seconds: 30

  - device_id: "thermostat-kitchen"
    field: "current_temperature"
    type: "sine_wave"
    params:
      center: 22.0
      amplitude: 1.5
      period_minutes: 45
      interval_seconds: 30

  - device_id: "thermostat-hallway"
    field: "current_temperature"
    type: "sine_wave"
    params:
      center: 19.5
      amplitude: 0.5
      period_minutes: 90
      interval_seconds: 30

  - device_id: "thermostat-bedroom"
    field: "current_temperature"
    type: "sine_wave"
    params:
      center: 20.0
      amplitude: 1.0
      period_minutes: 120
      interval_seconds: 30

  - device_id: "thermostat-bathroom"
    field: "current_temperature"
    type: "sine_wave"
    params:
      center: 23.0
      amplitude: 2.0
      period_minutes: 30
      interval_seconds: 30

  # Presence patterns
  - device_id: "presence-living"
    field: "presence"
    type: "presence_pattern"
    params:
      occupied_min_seconds: 60
      occupied_max_seconds: 300
      empty_min_seconds: 30
      empty_max_seconds: 120

  - device_id: "presence-hallway"
    field: "presence"
    type: "presence_pattern"
    params:
      occupied_min_seconds: 5
      occupied_max_seconds: 30
      empty_min_seconds: 60
      empty_max_seconds: 300

# ============================================
# LOADS (Physical equipment - NOT KNX devices)
# ============================================
loads:
  # Lights controlled by the 6-fold switch actuator
  - id: "load-light-living"
    name: "Living Room Light"
    type: "light"
    icon: "üí°"
    actuator_device_id: "light-actuator-6ch"
    actuator_channel_id: "A"
    room_id: "living-room"

  - id: "load-light-kitchen"
    name: "Kitchen Light"
    type: "light"
    icon: "üí°"
    actuator_device_id: "light-actuator-6ch"
    actuator_channel_id: "B"
    room_id: "kitchen"

  - id: "load-light-hallway"
    name: "Hallway Light"
    type: "light"
    icon: "üí°"
    actuator_device_id: "light-actuator-6ch"
    actuator_channel_id: "C"
    room_id: "hallway"

  - id: "load-light-bedroom"
    name: "Bedroom Light"
    type: "light"
    icon: "üí°"
    actuator_device_id: "light-actuator-6ch"
    actuator_channel_id: "D"
    room_id: "bedroom"

  - id: "load-light-bathroom"
    name: "Bathroom Light"
    type: "light"
    icon: "üí°"
    actuator_device_id: "light-actuator-6ch"
    actuator_channel_id: "E"
    room_id: "bathroom"

  # UFH zone valves controlled by the 6-fold heating actuator
  - id: "load-ufh-living"
    name: "UFH Valve"
    type: "valve"
    icon: "üî•"
    actuator_device_id: "heating-actuator-6ch"
    actuator_channel_id: "A"
    room_id: "living-room"

  - id: "load-ufh-kitchen"
    name: "UFH Valve"
    type: "valve"
    icon: "üî•"
    actuator_device_id: "heating-actuator-6ch"
    actuator_channel_id: "B"
    room_id: "kitchen"

  - id: "load-ufh-hallway"
    name: "UFH Valve"
    type: "valve"
    icon: "üî•"
    actuator_device_id: "heating-actuator-6ch"
    actuator_channel_id: "C"
    room_id: "hallway"

  - id: "load-ufh-bedroom"
    name: "UFH Valve"
    type: "valve"
    icon: "üî•"
    actuator_device_id: "heating-actuator-6ch"
    actuator_channel_id: "D"
    room_id: "bedroom"

  - id: "load-ufh-bathroom"
    name: "UFH Valve"
    type: "valve"
    icon: "üî•"
    actuator_device_id: "heating-actuator-6ch"
    actuator_channel_id: "E"
    room_id: "bathroom"
