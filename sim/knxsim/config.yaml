# KNXSim Default Configuration
# =============================
# Realistic sample home demonstrating KNX installation patterns.
# Each room has: light, wall switch, temperature sensor, presence detector.
# Actuators are centralized in Distribution Board (as in real installations).
#
# GA Structure: Standard 3-level (Main=Function, Middle=Floor, Sub=Object)
#   1/x/x = Lighting
#   3/x/x = HVAC / Heating
#   4/x/x = Sensors
#
# Topology: Area 1
#   1.1.x = Actuators (switch, heating)
#   1.2.x = Wall controls (push buttons)
#   1.3.x = Sensors (temperature, presence)
#
# IMPORTANT: Push buttons share GAs with actuator channels
# so pressing a button actually controls the linked light.

gateway:
  individual_address: "1.0.0"
  client_address: "1.0.255"

devices:
  # ============================================
  # DISTRIBUTION BOARD - SWITCH ACTUATORS
  # ============================================
  
  # 6-fold Switch Actuator for Lighting
  # Controls all room lights from the distribution board
  # Real device: MDT AKS-0616.03 / ABB SA/S 6.16.1
  - id: "light-actuator-6ch"
    type: "switch_actuator_6fold"
    individual_address: "1.1.1"
    group_addresses:
      # Channel A - Living Room Light
      channel_a_switch: "1/0/1"
      channel_a_switch_status: "1/0/2"
      # Channel B - Kitchen Light
      channel_b_switch: "1/0/10"
      channel_b_switch_status: "1/0/11"
      # Channel C - Hallway Light
      channel_c_switch: "1/0/20"
      channel_c_switch_status: "1/0/21"
      # Channel D - Bedroom Light
      channel_d_switch: "1/0/30"
      channel_d_switch_status: "1/0/31"
      # Channel E - Bathroom Light
      channel_e_switch: "1/0/40"
      channel_e_switch_status: "1/0/41"
      # Channel F - Spare
      channel_f_switch: "1/0/50"
      channel_f_switch_status: "1/0/51"

  # 6-fold Heating Actuator for Underfloor Heating Manifold
  # Controls zone valves for each room
  # Real device: MDT AKH-0600.02 / ABB VAA/S 6.230.2.1
  - id: "heating-actuator-6ch"
    type: "heating_actuator_6fold"
    individual_address: "1.1.2"
    group_addresses:
      # Channel A - Living Room Heating Valve
      channel_a_valve: "3/0/1"
      channel_a_valve_status: "3/0/2"
      # Channel B - Kitchen Heating Valve
      channel_b_valve: "3/0/10"
      channel_b_valve_status: "3/0/11"
      # Channel C - Hallway Heating Valve
      channel_c_valve: "3/0/20"
      channel_c_valve_status: "3/0/21"
      # Channel D - Bedroom Heating Valve
      channel_d_valve: "3/0/30"
      channel_d_valve_status: "3/0/31"
      # Channel E - Bathroom Heating Valve
      channel_e_valve: "3/0/40"
      channel_e_valve_status: "3/0/41"
      # Channel F - Spare
      channel_f_valve: "3/0/50"
      channel_f_valve_status: "3/0/51"

  # ============================================
  # LIVING ROOM DEVICES
  # ============================================

  # Light Fixture - Living Room (230V load connected to actuator Ch A)
  - id: "light-living"
    type: "light_switch"
    individual_address: "1.5.1"
    group_addresses:
      switch: "1/0/1"          # Same GA as actuator Ch A
      switch_status: "1/0/2"
    initial:
      on: false

  # Push Button - Living Room
  # Button 1 controls living room light (same GA as actuator Ch A)
  - id: "switch-living"
    type: "push_button_2fold"
    individual_address: "1.2.1"
    group_addresses:
      button_1: "1/0/1"        # → Light actuator Ch A (Living Room)
      button_1_led: "1/0/2"    # ← Status feedback from actuator
      button_2: "1/0/20"       # → Also controls Hallway (multi-location)
      button_2_led: "1/0/21"

  # Temperature Sensor - Living Room
  - id: "temp-living"
    type: "sensor"
    individual_address: "1.3.1"
    group_addresses:
      temperature: "4/0/1"
    initial:
      temperature: 21.5

  # Presence Detector - Living Room
  - id: "presence-living"
    type: "presence"
    individual_address: "1.3.2"
    group_addresses:
      presence: "4/1/1"
      lux: "4/2/1"
    initial:
      presence: false
      lux: 300

  # ============================================
  # KITCHEN DEVICES
  # ============================================

  # Light Fixture - Kitchen (230V load connected to actuator Ch B)
  - id: "light-kitchen"
    type: "light_switch"
    individual_address: "1.5.2"
    group_addresses:
      switch: "1/0/10"
      switch_status: "1/0/11"
    initial:
      on: false

  # Push Button - Kitchen
  - id: "switch-kitchen"
    type: "push_button_2fold"
    individual_address: "1.2.2"
    group_addresses:
      button_1: "1/0/10"       # → Light actuator Ch B (Kitchen)
      button_1_led: "1/0/11"
      button_2: "1/0/1"        # → Also controls Living Room
      button_2_led: "1/0/2"

  # Temperature Sensor - Kitchen
  - id: "temp-kitchen"
    type: "sensor"
    individual_address: "1.3.3"
    group_addresses:
      temperature: "4/0/10"
    initial:
      temperature: 22.0

  # Presence Detector - Kitchen
  - id: "presence-kitchen"
    type: "presence"
    individual_address: "1.3.4"
    group_addresses:
      presence: "4/1/10"
      lux: "4/2/10"
    initial:
      presence: false
      lux: 400

  # ============================================
  # HALLWAY DEVICES
  # ============================================

  # Light Fixture - Hallway (230V load connected to actuator Ch C)
  - id: "light-hallway"
    type: "light_switch"
    individual_address: "1.5.3"
    group_addresses:
      switch: "1/0/20"
      switch_status: "1/0/21"
    initial:
      on: false

  # Push Button - Hallway
  - id: "switch-hallway"
    type: "push_button_2fold"
    individual_address: "1.2.3"
    group_addresses:
      button_1: "1/0/20"       # → Light actuator Ch C (Hallway)
      button_1_led: "1/0/21"
      button_2: "1/0/1"        # → Also controls Living Room
      button_2_led: "1/0/2"

  # Temperature Sensor - Hallway
  - id: "temp-hallway"
    type: "sensor"
    individual_address: "1.3.5"
    group_addresses:
      temperature: "4/0/20"
    initial:
      temperature: 19.5

  # Presence Detector - Hallway
  - id: "presence-hallway"
    type: "presence"
    individual_address: "1.3.6"
    group_addresses:
      presence: "4/1/20"
      lux: "4/2/20"
    initial:
      presence: false
      lux: 100

  # ============================================
  # BEDROOM DEVICES
  # ============================================

  # Light Fixture - Bedroom (230V load connected to actuator Ch D)
  - id: "light-bedroom"
    type: "light_switch"
    individual_address: "1.5.4"
    group_addresses:
      switch: "1/0/30"
      switch_status: "1/0/31"
    initial:
      on: false

  # Push Button - Bedroom
  - id: "switch-bedroom"
    type: "push_button_2fold"
    individual_address: "1.2.4"
    group_addresses:
      button_1: "1/0/30"       # → Light actuator Ch D (Bedroom)
      button_1_led: "1/0/31"
      button_2: "1/0/40"       # → Also controls Bathroom
      button_2_led: "1/0/41"

  # Temperature Sensor - Bedroom
  - id: "temp-bedroom"
    type: "sensor"
    individual_address: "1.3.7"
    group_addresses:
      temperature: "4/0/30"
    initial:
      temperature: 20.0

  # Presence Detector - Bedroom
  - id: "presence-bedroom"
    type: "presence"
    individual_address: "1.3.8"
    group_addresses:
      presence: "4/1/30"
      lux: "4/2/30"
    initial:
      presence: false
      lux: 50

  # ============================================
  # BATHROOM DEVICES
  # ============================================

  # Light Fixture - Bathroom (230V load connected to actuator Ch E)
  - id: "light-bathroom"
    type: "light_switch"
    individual_address: "1.5.5"
    group_addresses:
      switch: "1/0/40"
      switch_status: "1/0/41"
    initial:
      on: false

  # Push Button - Bathroom
  - id: "switch-bathroom"
    type: "push_button_2fold"
    individual_address: "1.2.5"
    group_addresses:
      button_1: "1/0/40"       # → Light actuator Ch E (Bathroom)
      button_1_led: "1/0/41"
      button_2: "1/0/30"       # → Also controls Bedroom
      button_2_led: "1/0/31"

  # Temperature Sensor - Bathroom
  - id: "temp-bathroom"
    type: "sensor"
    individual_address: "1.3.9"
    group_addresses:
      temperature: "4/0/40"
    initial:
      temperature: 23.0

  # Presence Detector - Bathroom
  - id: "presence-bathroom"
    type: "presence"
    individual_address: "1.3.10"
    group_addresses:
      presence: "4/1/40"
      lux: "4/2/40"
    initial:
      presence: false
      lux: 200

# ============================================
# SCENARIOS (Simulated sensor behavior)
# ============================================
scenarios:
  # Temperature variations per room
  - device_id: "temp-living"
    field: "temperature"
    type: "sine_wave"
    params:
      center: 21.5
      amplitude: 1.0
      period_minutes: 60
      interval_seconds: 30

  - device_id: "temp-kitchen"
    field: "temperature"
    type: "sine_wave"
    params:
      center: 22.0
      amplitude: 1.5
      period_minutes: 45
      interval_seconds: 30

  - device_id: "temp-hallway"
    field: "temperature"
    type: "sine_wave"
    params:
      center: 19.5
      amplitude: 0.5
      period_minutes: 90
      interval_seconds: 30

  - device_id: "temp-bedroom"
    field: "temperature"
    type: "sine_wave"
    params:
      center: 20.0
      amplitude: 1.0
      period_minutes: 120
      interval_seconds: 30

  - device_id: "temp-bathroom"
    field: "temperature"
    type: "sine_wave"
    params:
      center: 23.0
      amplitude: 2.0
      period_minutes: 30
      interval_seconds: 30

  # Presence patterns
  - device_id: "presence-living"
    field: "presence"
    type: "presence_pattern"
    params:
      occupied_min_seconds: 60
      occupied_max_seconds: 300
      empty_min_seconds: 30
      empty_max_seconds: 120

  - device_id: "presence-hallway"
    field: "presence"
    type: "presence_pattern"
    params:
      occupied_min_seconds: 5
      occupied_max_seconds: 30
      empty_min_seconds: 60
      empty_max_seconds: 300
